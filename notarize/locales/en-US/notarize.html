<script type="text/html" data-help-name="notarize certificate">
    <p>Notarizes a certificate using S1Seven's servers.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>
            payload
            <span class="property-type">string | buffer | object</span>
        </dt>
        <dd>the certificate to notarize.</dd>
        <dt class="message-properties">accessToken <span class="property-type">string</span></dt>
        <dd>the access token to use to authenticate the request.</dd>
        <dt class="message-properties">companyId <span class="property-type">string</span></dt>
        <dd>the id of the company to associate with the notarization.</dd>
        <dt class="message-properties">identity <span class="property-type">string</span></dt>
        <dd>the identity id to associate with the notarization.</dd>
        <dt class="optional">mode <span class="property-type">test | live</span></dt>
        <dd>choose the mode that you want to use - test mode or live mode. Defaults to test</dd>
        <dt class="optional">environment <span class="property-type">staging | development</span></dt>
        <dd>choose the environment that you want to use - app.s1seven.ovh or app.s1seven.dev. Defaults to staging</dd>
    </dl>

    <h3>Outputs</h3>
    <ol class="node-ports">
        <li>
            Standard output
            <dl class="message-properties">
                <dt>payload <span class="property-type">object</span></dt>
                <dd>
                    the response from the HTTP request. If the request is successful, the response will contain a
                    <code>isNewInstance</code> property and a <code>hash</code> property.
                </dd>
            </dl>
        </li>
    </ol>

    <h3>Details</h3>
    <p>
        <code>msg.payload</code> is used as the payload of the POST request. It should contain the certificate to be
        hashed. If it contains an buffer or JSON string it will be converted to an object before being sent.
    </p>

    <p>
        The certificate can also be read from the global property "certificate". If <code>msg.payload</code> is present,
        it will have priority over <code>global.certificate</code>.
    </p>

    <p>
        <code>msg.identity</code> is the id of the identity to be associated with the notarization. You can get the
        identity id using the <code>get identity</code> node, and copy-pasting the id of an identity from the response.
        It can be input via <code>msg.identity</code>, via the ui which can be found be double-clicking on the
        <code>notarize</code> node, or via <code>global.identity</code>, in that order of priority.
    </p>

    <p>
        The following properties can be added via the admin ui, found by double-clicking on the hash node, or by passing
        them in using the <code>msg</code> object. If they are passed in via the <code>msg</code> object, they will have
        priority over the values found in the admin ui. This allows the values to be overridden dynamically if
        necessary. For example, if both <code>msg.accessToken</code> and an access token added via the admin ui are
        present, <code>msg.accessToken</code> will be used instead of the admin ui access token.
    </p>

    <p>
        <code>msg.accessToken</code> is used to authenticate the HTTP request. The access token can be generated at
        <a>https://app.s1seven.dev/developers/access-tokens</a> or
        <a>https://app.s1seven.ovh/developers/access-tokens</a>.
    </p>

    <p>
        <code>msg.companyId</code> is the id of the company to be associated with the notarization. It can be found at
        <a>https://app.s1seven.ovh/developers/constants</a> or <a>https://app.s1seven.dev/developers/constants</a>.
    </p>

    <p>
        <code>msg.mode</code> allows you to pass in the string value <code>test</code> or <code>live</code> to choose
        which choose mode you want to use - test mode or live mode.
    </p>

    <p>
        <code>msg.environment</code> allows you to pass in the string value <code>staging</code> or
        <code>development</code> to choose which server you wish to use.
    </p>
</script>
